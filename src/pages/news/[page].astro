---
import NewsList from "@/components/NewsList.astro";
import Pagination from "@/components/Pagination.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import type { GetStaticPathsOptions } from "astro";
import { getCollection } from "astro:content";

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const allNews = await getCollection("news");

  const sortedNews = allNews.sort((a, b) => {
    return b.data.date.getTime() - a.data.date.getTime();
  });

  return paginate(sortedNews, { pageSize: 15 });
}

const { page } = Astro.props;
---

<BaseLayout pageTitle="ニュース一覧">
  <div class="container mx-auto px-4 py-8">
    <h1 class="font-semibold text-xl pl-2 border-b-2 border-l-8 border-solid border-black mb-3">
      NEWS
    </h1>
    <NewsList news={page.data} />
    <Pagination page={page} />
  </div>
</BaseLayout>
